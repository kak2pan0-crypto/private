üìù –ê–≤—Ç–æ—Ä –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:**–ì—Ä—É–±–∏—á –í.–ï.**  
üìÖ –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: **—Ñ–µ–≤—Ä–∞–ª—å 2025**

# üì° –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–≤—è–∑–∫–∏ ITM-K –∏ ITM-A

> üìå **–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ ITM-A/K —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω**

## üìã –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–í –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ **—Å–µ—Ä–≤–µ—Ä –∞–≥–µ–Ω—Ç–æ–≤ ITM-A** —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–∞–Ω–Ω—ã—Ö –≤ **ITM-K**.

---

## ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ "–ü—Ä–æ–∫—Å–∏" –≤ –≤–µ–±-–∫–æ–Ω—Å–æ–ª–∏ ITM-K

1. –í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ ITM-K –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **¬´–ü—Ä–æ–∫—Å–∏¬ª** ‚Üí **¬´–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–∫—Å–∏¬ª**.
2. –£–∫–∞–∂–∏—Ç–µ:
   - **–ò–º—è –ø—Ä–æ–∫—Å–∏**: –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `hostname` —Å–µ—Ä–≤–µ—Ä–∞, –≥–¥–µ —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç **ITM-A**.
   - **–†–µ–∂–∏–º**: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî **–ü–∞—Å—Å–∏–≤–Ω—ã–π** (ITM-K –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–æ–∫—Å–∏ –∫–∞–∂–¥—ã–µ 6 —Å–µ–∫—É–Ω–¥).
   - **IP-–∞–¥—Ä–µ—Å**: —Å–µ—Ä–≤–µ—Ä–∞ ITM-A.
   - **–ü–æ—Ä—Ç**: `10051` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –¥–ª—è Zabbix Proxy).

![screen](https://raw.githubusercontent.com/kak2pan0-crypto/private/main/gis/images/5114b1tup2.jpg)

![screen](https://raw.githubusercontent.com/kak2pan0-crypto/private/main/gis/images/yv3a2hqfgm.jpg)

---

## üñ•Ô∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞ —Å–µ—Ç–∏ (–ê–†–ú/—Å–µ—Ä–≤–µ—Ä) –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —É–∑–ª–∞ –≤ ITM-K:

- ‚úÖ **–ò–º—è —É–∑–ª–∞**: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π `hostname` –Ω–∞–±–ª—é–¥–∞–µ–º–æ–π –º–∞—à–∏–Ω—ã.  
- üè∑Ô∏è **–í–∏–¥–∏–º–æ–µ –∏–º—è**: –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –ø–æ–Ω—è—Ç–Ω–æ–µ —á–µ–ª–æ–≤–µ–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–ê–†–ú –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∞¬ª).  
- üåê **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: IP + –ø–æ—Ä—Ç `10050`.  
- üîÑ **–ù–∞–±–ª—é–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏**: –≤—ã–±–µ—Ä–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –ø—Ä–æ–∫—Å–∏ (ITM-A).  
- üì¶ **–®–∞–±–ª–æ–Ω—ã**: –≤—ã–±–µ—Ä–∏—Ç–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –û–° (–≤ –ø—Ä–∏–º–µ—Ä–µ ‚Äî Linux).

![screen](https://raw.githubusercontent.com/kak2pan0-crypto/private/main/gis/images/obs206511g.jpg)  
![screen](https://raw.githubusercontent.com/kak2pan0-crypto/private/main/gis/images/lo6afnnmuu.jpg)

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Zabbix Agent –Ω–∞ –Ω–∞–±–ª—é–¥–∞–µ–º–æ–º –ê–†–ú–µ/—Å–µ—Ä–≤–µ—Ä–µ

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:  
`/etc/zabbix/zabbix_agent2.conf`

–ò–∑–º–µ–Ω–∏—Ç–µ **—Ç–æ–ª—å–∫–æ —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**:

```ini
Server=10.195.5.110          # ‚Üê IP —Å–µ—Ä–≤–µ—Ä–∞ ITM-A
ServerActive=10.195.5.110    # ‚Üê IP —Å–µ—Ä–≤–µ—Ä–∞ ITM-A
ListenPort=10050             # ‚Üê —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç –∞–≥–µ–Ω—Ç–∞
Hostname=itm-a               # ‚Üê hostname —Å–µ—Ä–≤–µ—Ä–∞ —Å ITM-A
```

> üí° –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

–ü–æ—Å–ª–µ –ø—Ä–∞–≤–∫–∏ ‚Äî –ø—Ä–∏–º–µ–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

```bash
systemctl enable zabbix-agent2.service --now
systemctl restart zabbix-agent2
systemctl status zabbix-agent2
```

![screen](https://raw.githubusercontent.com/kak2pan0-crypto/private/main/gis/images/b3xa7qraq5.jpg)

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:
- –£–∑–µ–ª –ø–æ—è–≤–∏—Ç—Å—è –≤ –≤–µ–±-–∫–æ–Ω—Å–æ–ª–∏ **ITM-K**.
- –ú–µ—Ç—Ä–∏–∫–∏ –±—É–¥—É—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è **–Ω–∞ ITM-A**, –∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è ‚Äî –≤ **ITM-K**.

---

## üõ†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –ë–î
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã:
- `/opt/datapkitm/env/.db.env` ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å IP, –ª–æ–≥–∏–Ω–∞, –ø–∞—Ä–æ–ª—è –ë–î.
- `/opt/datapkitm/env/.proxy.env` ‚Äî —Ä–µ–∂–∏–º –ø—Ä–æ–∫—Å–∏, IP ITM-K, –ø–æ—Ä—Ç.

![screen](https://raw.githubusercontent.com/kak2pan0-crypto/private/main/gis/images/a22acsniac.jpg)  
![screen](https://raw.githubusercontent.com/kak2pan0-crypto/private/main/gis/images/s2fvj1edj2.jpg) 

> ‚ö†Ô∏è IP –≤ `.db.env` ‚Äî —ç—Ç–æ **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**, –∞ –Ω–µ —Ö–æ—Å—Ç–∞!

### 2. –û—à–∏–±–∫–∏ –≤ `pg_hba.conf`

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```conf
host all all 0.0.0.0/0 md5
```

![screen](https://raw.githubusercontent.com/kak2pan0-crypto/private/main/gis/images/jjv90o4ic5.jpg)  
![screen](https://raw.githubusercontent.com/kak2pan0-crypto/private/main/gis/images/syx0atqaqk.jpg)

### 3. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ –ª–æ–≥–∏
–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/opt/datapkitm`:

```bash
docker-compose logs
```

![screen](https://raw.githubusercontent.com/kak2pan0-crypto/private/main/gis/images/a1wwxbt97x.jpg)  
*–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ `pg_hba.conf`*

### 4. –û—à–∏–±–∫–∏ –≤ `zabbix_agent2.conf`
–ù–µ–≤–µ—Ä–Ω—ã–π `Hostname` –∏–ª–∏ `Server` ‚Äî —á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –¥–∞–Ω–Ω—ã—Ö.

![screen](https://raw.githubusercontent.com/kak2pan0-crypto/private/main/gis/images/4ufnir3d20.jpg)


## üéâ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ

> **–ù–∞ —ç—Ç–æ–º –≤—Å—ë!**  
> –°–≤—è–∑–∫–∞ ITM-K ‚Üî ITM-A –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ.
